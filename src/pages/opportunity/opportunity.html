<ion-header>
  <ion-navbar>
    <ion-buttons start>
      <button ion-button
              icon-only
              clear
              menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>Fırsat</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-row [ngClass]="itemone ? 'toLogoUp' : 'toLogoDown'"  text-center>
    <ion-col style="font-weight:900;font-size: large" align-self-center>
      <span>{{opportunity.title}}</span>
    </ion-col>
  </ion-row>
  <ion-card  [ngClass]="itemtwo ? 'toLogoUp' : 'toLogoDown'"  style="padding-top: 10px;border-radius: 10px">
    <ion-row col-10 offset-1 style="text-align: center">
      <ion-col>
        <button  #upVote
                ion-button
                clear

                (click)="upVoteDeal(opportunity.id,upVote)"
                [@onItemBump]="upVote.stateChanger ? 'onBump' : 'default'">
          <ion-icon class="vote" name="arrow-up"></ion-icon>
        </button>
      </ion-col>
      <ion-col>
        <ion-chip>
          <ion-icon name="heart" color="danger" class="animate-hearth"></ion-icon>
          <ion-label>{{opportunity.votes_sum}}</ion-label>
        </ion-chip>
      </ion-col>
      <ion-col>
        <button #downVote
                ion-button

                clear
                (click)="downVoteDeal(opportunity.id,downVote)"
                [@onItemBump]="downVote.stateChanger ? 'onBump' : 'default'">
          <ion-icon class="vote" name="arrow-down"></ion-icon>
        </button>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-8 offset-2 style="text-align: center">
        <img src="https://benimfirsatim.com/{{opportunity.image_url}}">
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col padding>
        {{opportunity.details}}
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col text-center>
        <button ion-button
                round
                color="button"
                (click)="onOutsideDealLink(opportunity,itemone,itemtwo,itemthree)">Fırsata Git !</button>
      </ion-col>
    </ion-row>
  </ion-card>
  <ion-row [ngClass]="itemthree ? 'toLogoUp' : 'toLogoDown'" >
    <ion-col text-center>
      <span style="font-size: medium;font-weight: 400">YORUMLAR</span>
    </ion-col>
  </ion-row>
  <ion-list [ngClass]="itemfour ? 'toLogoUp' : 'toLogoDown'" >
    <comment *ngFor="let comment of comments;let i = index" id="{{comment.newlyAdded}}" [comment]="comment" [opportunity]="opportunity"
             ngClass="highlighted">
    </comment>
  </ion-list>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Yükleniyor...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>

<ion-footer>
  <form #f="ngForm" (submit)="onCommentSubmit(f)">
    <ion-grid>
      <ion-row>
        <!--<ion-col col-2 style="text-align: center" align-self-center>
          <button>
            <ion-icon style="font-size: xx-large;font-weight: 900;color:#2FA4E7" name="add"></ion-icon>
          </button>
        </ion-col>-->
        <ion-col col-8>
          <ion-item no-lines>
            <ion-input required [ngModel] name="comment" style="padding:0 0 0 10px;font-size:15px;background-color: #f0ecec;border-radius: 64px" type="text" placeholder="Düşüncelerin neler ?"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-2 text-center align-self-center>
          <button type="submit"
            [disabled]="!f.valid">
            <ion-icon style="font-size: xx-large;font-weight: 900;color:#2FA4E7" name="send"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-footer>
