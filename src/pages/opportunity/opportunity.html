<ion-header>
  <ion-toolbar>
    <ion-navbar text-center hideBackButton="true" style="padding: 0px !important">
      <ion-grid style="padding: 0px !important">
        <ion-row>
          <ion-col col-1>
            <img (click)="goBack()" src="assets/imgs/back_button@3x.png">
          </ion-col>
          <ion-col col-3 push-3 style="display: flex;align-items: center">
            <img src="assets/imgs/firsat_header@3x.png">
          </ion-col>
          <ion-col col-1 push-6>
            <img src="assets/imgs/paylas_button@3x.png">
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-navbar>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row [ngClass]="itemone ? 'toLogoUp' : 'toLogoDown'"  text-center>
    <ion-col style="font-family: MarkPro-Heavy;font-size: 20px;color:#234491;margin-top: 20px" align-self-center>
      <span>{{opportunity.title}}</span>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-8 offset-2 style="text-align: center">
      <img src="https://app-b7b3c182-2419-47ad-a597-caf24ce3f70c.cleverapps.io/{{opportunity.image_url}}">
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-2 push-1 style="display: flex;align-items: center">
      <img src="assets/imgs/price_tag@3x.png">
    </ion-col>
    <ion-col col-4 push-1 style="display: flex;align-items: center">
      <ion-label  [ngStyle]="{'font-size':isPriceToolong()}" style="font-family: MarkPro-Black;font-size: 25px;color:#234491">{{whatIsPrice()}}</ion-label>
    </ion-col>
    <ion-col style="padding: 0px !important;display: flex;align-items: center;justify-content: center" col-5>
      <div style="background-color: #F7E60F;border-radius: 20px 20px 20px 20px;width: 100%">
        <ion-grid style="padding: 0px !important;">
          <ion-row style="padding: 0px !important;">
            <ion-col style="padding: 0px !important;display: flex;align-items: center" col-4>
              <img style="border-radius: 50%;width: 40px;height: 40px;" src="{{opportunity.user.avatar_url}}">
            </ion-col>
            <ion-col style="padding: 0px !important;display: flex;align-items: center" col-8>
              <span style="font-family: MarkPro-Heavy;font-size: 15px;color:#234491;word-break: break-word">{{opportunity.user.name}}</span>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>
      <img style="transform: scale(0.9)" src="assets/imgs/seperator_line@3x.png">
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col style="margin-left: 18px">
      <span style="font-family: MarkPro-Medium;font-size: 15px;color:#234491">{{opportunity.details}}</span>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>
      <img style="transform: scale(0.9)" src="assets/imgs/seperator_line@3x.png">
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-2 push-1>
      <img                (click)="upVoteDeal(opportunity.id)"
                          src="assets/imgs/like_button@3x.png">
      <ion-label style="font-family: MarkPro-Heavy;font-size: 16px;position:absolute;top: 12%;left:61%;color:#234491">{{opportunity.votes_sum}}</ion-label>
    </ion-col>
    <ion-col col-6 push-1>
      <img   (click)="onOutsideDealLink(opportunity,itemone,itemtwo,itemthree)" src="assets/imgs/firsata_git_button@3x.png">
    </ion-col>
    <ion-col col-2 push-1>
      <img src="assets/imgs/comment_button@3x.png">
      <ion-label style="font-family: MarkPro-Heavy;font-size: 16px;position:absolute;top: 12%;left:61%;color:#234491">{{opportunity.comments_count}}</ion-label>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>
      <img style="transform: scale(0.9)" src="assets/imgs/yorumlar_header@3x.png">
    </ion-col>
  </ion-row>
  <!--<ion-row>-->
    <!--<ion-col>-->
      <!--<button  #upVote-->
               <!--ion-button-->
               <!--clear-->
               <!--(click)="upVoteDeal(opportunity.id,upVote)"-->
               <!--[@onItemBump]="upVote.stateChanger ? 'onBump' : 'default'">-->
        <!--<ion-icon class="vote" name="arrow-up"></ion-icon>-->
      <!--</button>-->
    <!--</ion-col>-->
  <!--</ion-row>-->
  <ion-list [ngClass]="itemfour ? 'toLogoUp' : 'toLogoDown'" >
    <comment *ngFor="let comment of comments;let i = index" id="{{comment.newlyAdded}}" [comment]="comment" [opportunity]="opportunity"
             ngClass="highlighted">
    </comment>
  </ion-list>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Yükleniyor...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>

<ion-footer>
  <form #f="ngForm" (submit)="onCommentSubmit(f)">
    <ion-grid>
      <ion-row>
        <!--<ion-col col-2 style="text-align: center" align-self-center>
          <button>
            <ion-icon style="font-size: xx-large;font-weight: 900;color:#2FA4E7" name="add"></ion-icon>
          </button>
        </ion-col>-->
        <ion-col col-8>
          <ion-item no-lines>
            <ion-input required [ngModel] name="comment" style="padding:0 0 0 10px;font-size:15px;background-color: #f0ecec;border-radius: 64px" type="text" placeholder="Düşüncelerin neler ?"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col col-2 text-center align-self-center>
          <button type="submit"
            [disabled]="!f.valid">
            <img src="assets/imgs/dusuncelerin_neler_icon@3x.png">
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-footer>
